<div class="modal-overlay">
    <div class="modal-card">
        <div class="modal-header">
            <h3>Change Password</h3>
            <button class="close-button" (click)="onClose()">
                <i class="bi bi-x-lg"></i>
            </button>
        </div>

        <form [formGroup]="form" (ngSubmit)="onSubmit()">
            <div class="modal-body">
                <div class="form-group">
                    <label>Current Password</label>
                    <input type="password" formControlName="currentPassword" placeholder="Enter current password">
                    <span class="error"
                        *ngIf="form.get('currentPassword')?.touched && form.get('currentPassword')?.invalid">
                        Current password is required
                    </span>
                </div>

                <div class="form-group">
                    <label>New Password</label>
                    <input type="password" formControlName="newPassword" placeholder="Enter new password">
                    <span class="error" *ngIf="form.get('newPassword')?.touched && form.get('newPassword')?.invalid">
                        Password must be at least 8 characters with uppercase, lowercase, number and special character
                        (@$!%*?&)
                    </span>
                </div>

                <div class="form-group">
                    <label>Confirm Password</label>
                    <input type="password" formControlName="confirmPassword" placeholder="Confirm new password">
                    <span class="error" *ngIf="form.get('confirmPassword')?.touched && !passwordsMatch">
                        Passwords do not match
                    </span>
                </div>

                <div class="error-message" *ngIf="errorMessage">{{ errorMessage }}</div>
                <div class="success-message" *ngIf="successMessage">{{ successMessage }}</div>
            </div>

            <div class="modal-footer">
                <button type="button" class="btn btn-cancel" (click)="onClose()">Cancel</button>
                <button type="submit" class="btn btn-primary" [disabled]="isLoading">
                    {{ isLoading ? 'Changing...' : 'Change Password' }}
                </button>
            </div>
        </form>
    </div>
</div>